<!doctype html>
<html>
  <head>
    <title>Jurisdiction Management - Food Safety Inspector</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      * { box-sizing: border-box; margin: 0; padding: 0; }
      body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f3f4f6; min-height: 100vh; }
      .header { background: #1E40AF; color: white; padding: 16px 24px; display: flex; align-items: center; justify-content: space-between; }
      .header-left { display: flex; align-items: center; gap: 12px; }
      .header-logo { width: 40px; height: 40px; background: rgba(255,255,255,0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; }
      .header-logo svg { width: 24px; height: 24px; fill: white; }
      .header-title { font-size: 18px; font-weight: 600; }
      .back-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px 16px; border-radius: 6px; font-size: 14px; cursor: pointer; text-decoration: none; }
      .back-btn:hover { background: rgba(255,255,255,0.2); }
      .main { padding: 24px; max-width: 1200px; margin: 0 auto; }
      .page-header { margin-bottom: 32px; }
      .page-title { font-size: 28px; font-weight: 700; color: #1f2937; margin-bottom: 8px; }
      .page-subtitle { color: #6b7280; font-size: 16px; }
      .cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
      .module-card { background: white; border-radius: 12px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); text-decoration: none; color: inherit; transition: transform 0.2s, box-shadow 0.2s; cursor: pointer; display: block; }
      .module-card:hover { transform: translateY(-4px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
      .module-icon { width: 56px; height: 56px; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; }
      .module-icon svg { width: 28px; height: 28px; }
      .module-icon.blue { background: #dbeafe; }
      .module-icon.blue svg { fill: #1E40AF; }
      .module-icon.green { background: #d1fae5; }
      .module-icon.green svg { fill: #059669; }
      .module-icon.purple { background: #ede9fe; }
      .module-icon.purple svg { fill: #7c3aed; }
      .module-icon.amber { background: #fef3c7; }
      .module-icon.amber svg { fill: #d97706; }
      .module-title { font-size: 18px; font-weight: 600; color: #1f2937; margin-bottom: 8px; }
      .module-desc { color: #6b7280; font-size: 14px; line-height: 1.5; }
      .module-stats { display: flex; gap: 16px; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e5e7eb; }
      .stat-item { text-align: center; }
      .stat-value { font-size: 24px; font-weight: 700; color: #1E40AF; }
      .stat-label { font-size: 12px; color: #6b7280; }
    </style>
  </head>
  <body>
    <header class="header">
      <div class="header-left">
        <div class="header-logo">
          <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
        </div>
        <div>
          <div class="header-title">Jurisdiction Management</div>
        </div>
      </div>
      <a href="/admin/dashboard" class="back-btn">Back to Dashboard</a>
    </header>

    <main class="main">
      <div class="page-header">
        <h1 class="page-title">Jurisdiction & Administrative Hierarchy</h1>
        <p class="page-subtitle">Configure administrative levels, jurisdiction units, and officer assignments</p>
      </div>

      <div class="cards-grid">
        <a href="/admin/jurisdiction/levels" class="module-card">
          <div class="module-icon blue">
            <svg viewBox="0 0 24 24"><path d="M3 5v14h18V5H3zm4 2h10v2H7V7zm0 4h10v2H7v-2zm0 4h7v2H7v-2z"/></svg>
          </div>
          <div class="module-title">Administrative Levels</div>
          <div class="module-desc">Define hierarchy levels like State, District, Zone, Mandal. Control level ordering and activation.</div>
          <div class="module-stats">
            <div class="stat-item">
              <div class="stat-value" id="levels-count">-</div>
              <div class="stat-label">Levels Defined</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="levels-active">-</div>
              <div class="stat-label">Active</div>
            </div>
          </div>
        </a>

        <a href="/admin/jurisdiction/units" class="module-card">
          <div class="module-icon green">
            <svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
          </div>
          <div class="module-title">Jurisdiction Units</div>
          <div class="module-desc">Create and manage jurisdiction units with hierarchical parent-child relationships and tree structure.</div>
          <div class="module-stats">
            <div class="stat-item">
              <div class="stat-value" id="units-count">-</div>
              <div class="stat-label">Units</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="units-active">-</div>
              <div class="stat-label">Active</div>
            </div>
          </div>
        </a>

        <a href="/admin/jurisdiction/roles" class="module-card">
          <div class="module-icon purple">
            <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
          </div>
          <div class="module-title">Roles & Capacities</div>
          <div class="module-desc">Define officer roles (FSO, DO, FAC) and capacities (Regular, In-Charge, Temporary) for assignments.</div>
          <div class="module-stats">
            <div class="stat-item">
              <div class="stat-value" id="roles-count">-</div>
              <div class="stat-label">Roles</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="capacities-count">-</div>
              <div class="stat-label">Capacities</div>
            </div>
          </div>
        </a>

        <a href="/admin/jurisdiction/assignments" class="module-card">
          <div class="module-icon amber">
            <svg viewBox="0 0 24 24"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
          </div>
          <div class="module-title">Officer Assignments</div>
          <div class="module-desc">Assign officers to jurisdictions with roles, capacities, and time-bound validity periods.</div>
          <div class="module-stats">
            <div class="stat-item">
              <div class="stat-value" id="assignments-count">-</div>
              <div class="stat-label">Assignments</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="assignments-active">-</div>
              <div class="stat-label">Active</div>
            </div>
          </div>
        </a>
      </div>
    </main>

    <script>
      async function loadStats() {
        try {
          const [levels, units, roles, capacities, assignments] = await Promise.all([
            fetch('/api/admin/levels').then(r => r.json()),
            fetch('/api/admin/units').then(r => r.json()),
            fetch('/api/admin/roles').then(r => r.json()),
            fetch('/api/admin/capacities').then(r => r.json()),
            fetch('/api/admin/assignments').then(r => r.json())
          ]);
          
          document.getElementById('levels-count').textContent = levels.length;
          document.getElementById('levels-active').textContent = levels.filter(l => l.status === 'active').length;
          document.getElementById('units-count').textContent = units.length;
          document.getElementById('units-active').textContent = units.filter(u => u.status === 'active').length;
          document.getElementById('roles-count').textContent = roles.length;
          document.getElementById('capacities-count').textContent = capacities.length;
          document.getElementById('assignments-count').textContent = assignments.length;
          document.getElementById('assignments-active').textContent = assignments.filter(a => a.status === 'active').length;
        } catch (error) {
          console.error('Failed to load stats:', error);
        }
      }
      
      loadStats();
    </script>
  </body>
</html>
